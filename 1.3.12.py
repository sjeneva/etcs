import requests
import html2text
import os

# Ensure there's a directory to store the files
output_dir = "Korea_SIN_환경_extracted_articles"
os.makedirs(output_dir, exist_ok=True)


def extract_specific_part_from_text(text, start_marker, end_marker):
    start_index = text.find(start_marker)
    end_index = text.find(end_marker, start_index) + len(end_marker)
    if start_index != -1 and end_index != -1:
        return text[start_index:end_index]
    return "Content not found."

def extract_text_from_url(url):
    response = requests.get(url)
    response.raise_for_status()  # Raise an error for bad responses (4xx, 5xx)
    full_text = html2text.html2text(response.text)
    specific_part = extract_specific_part_from_text(full_text,  "_닫기_", "기자**")
    return specific_part



base_url = ' https://www.cargotimes.net/news/articleView.html?idxno='
article_partial_urls = [

"320043",	"320033",	"320025",	"320020",	"320010",	"320009",	"320005",	"320003",	"320002",	"319967",	"319936",	"319919",	"319909",	"319881",	"319871",	"319859",	"319822",	"319821",	"319820",	"319791",	"319780",	"319744",	"319727",	"319685",	"319681",	"319677",	"319672",	"319660",	"319645",	"319583",	"319516",	"319503",	"319419",	"319396",	"319392",	"319385",	"319368",	"319347",	"319336",	"319335",	"319329",	"319303",	"319300",	"319225",	"319220",	"319214",	"319092",	"319080",	"319037",	"319011",	"318999",	"318979",	"318971",	"318964",	"318931",	"318918",	"318901",	"318884",	"318881",	"318798",	"318772",	"318743",	"318728",	"318725",	"318724",	"318696",	"318672",	"318690",	"318689",	"318684",	"318644",	"318639",	"318627",	"318620",	"318606",	"318592",	"318591",	"318587",	"318577",	"318575",	"318563",	"318556",	"318540",	"318516",	"318513",	"318491",	"318478",	"318475",	"318471",	"318470",	"318459",	"318456",	"318438",	"318401",	"318393",	"318391",	"318363",	"318352",	"318343",	"318342",	"318333",	"318318",	"318307",	"318291",	"318286",	"318282",	"318267",	"318254",	"318250",	"318245",	"318235",	"318218",	"318215",	"318214",	"318204",	"318203",	"318190",	"318161",	"318155",	"318150",	"318148",	"318141",	"318126",	"318112",	"318111",	"318110",	"318088",	"318080",	"318068",	"318066",	"318055",	"318050",	"318047",	"317996",	"317966",	"317965",	"317956",	"317937",	"317925",	"317911",	"317898",	"317848",	"317847",	"317840",	"317819",	"317813",	"317800",	"317788",	"317782",	"317779",	"317769",	"317760",	"317752",	"317751",	"317732",	"317718",	"317713",	"317701",	"317669",	"317661",	"317657",	"317637",	"317634",	"317615",	"317609",	"317582",	"317503",	"317442",	"317392",	"317371",	"317276",	"317271",	"317268",	"317265",	"317257",	"317240",	"317235",	"317223",	"317217",	"317194",	"317179",	"317171",	"317166",	"317151",	"317149",	"317130",	"317124",	"317113",	"317110",	"317071",	"317029",	"317012",	"316995",	"316986",	"316972",	"316951",	"316948",	"316946",	"316935",	"316922",	"316891",	"316876",	"316870",	"316869",	"316846",	"316837",	"316834",	"316799",	"316787",	"316783",	"316759",	"316747",	"316745",	"316722",	"316716",	"316715",	"316714",	"316711",	"316703",	"316702",	"316672",	"316669",	"316666",	"316641",	"316638",	"316636",	"316633",	"316632",	"316612",	"316590",	"316581",	"316563",	"316556",	"316543",	"316540",	"316536",	"316530",	"316503",	"316489",	"316486",	"316463",	"316455",	"316440",	"316432",	"316404",	"316393",	"316373",	"316354",	"316352",	"316337",	"316324",	"316322",	"316318",	"316314",	"316307",	"316291",	"316284",	"316285",	"316278",	"316259",	"316257",	"316239",	"316232",	"316162",	"316155",	"316154",	"316151",	"316148",	"316140",	"316138",	"316134",	"316128",	"316113",	"316105",	"316098",	"316082",	"316052",	"316046",	"316042",	"316041",	"316038",	"316030",	"315978",	"315965",	"315964",	"315953",	"315932",	"315899",	"315891",	"315889",	"315882",	"315872",	"315859",	"315838",	"315828",	"315785",	"315770",	"315735",	"315724",	"315723",	"315721",	"315704",	"315694",	"315692",	"315633",	"315631",	"315595",	"315593",	"315573",	"315569",	"315541",	"315491",	"315489",	"315455",	"315418",	"315412",	"315399",	"315398",	"315388",	"315384",	"315375",	"315349",	"315341",	"315337",	"315320",	"315316",	"315313",	"315304",	"315301",	"315299",	"315288",	"315282",	"315271",	"315267",	"315264",	"315262",	"315249",	"315237",	"315222",	"315208",	"315203",	"315202",	"315188",	"315138",	"315124",	"315101",	"315095",	"315089",	"315088",	"315082",	"315078",	"315069",	"315068",	"315056",	"315032",	"315028",	"314989",	"314979",	"314978",	"314922",	"314918",	"314908",	"314900",	"314898",	"314895",	"314891",	"314884",	"314882",	"314857",	"314843",	"314823",	"314811",	"314795",	"314786",	"314784",	"314774",	"314759",	"314724",	"314720",	"314692",	"314671",	"314670",	"314656",	"314618",	"314586",	"314560",	"314555",	"314511",	"314509",	"314500",	"314460",	"314464",	"314408",	"314397",	"314380",	"314370",	"314359",	"314355",	"314354",	"314351",	"314335",	"314299",	"314294",	"314263",	"314260",	"314247",	"314225",	"314187",	"314174",	"314172",	"314167",	"314143",	"314136",	"314131",	"314130",	"314037",	"313970",	"313957",	"313938",	"313924",	"313870",	"313865",	"313859",	"313844",	"313800",	"313798",	"313795",	"313702",	"313643",	"313639",	"313637",	"313619",	"313601",	"313599",	"313594",	"313584",	"313555",	"313543",	"313538",	"313485",	"313468",	"313466",	"313460",	"313459",	"313445",	"313440",	"313430",	"313428",	"313426",	"313405",	"313404",	"313358",	"313395",	"313392",	"313391",	"313388",	"313384",	"313367",	"313365",	"313363",	"313349",	"313338",	"313311",	"313297",	"313282",	"313259",	"313253",	"313246",	"313244",	"313239",	"313232",	"313217",	"313213",	"313210",	"313202",	"313197",	"313192",	"313191",	"313190",	"313173",	"313163",	"313162",	"313158",	"313128",	"313121",	"313108",	"313084",	"313061",	"313056",	"313047",	"313029",	"313022",	"313020",	"313012",	"313004",	"313003",	"313001",	"312999",	"312997",	"312993",	"312988",	"312983",	"312980",	"312969",	"312967",	"312924",	"312915",	"312894",	"312885",	"312858",	"312844",	"312832",	"312808",	"312797",	"312792",	"312770",	"312757",	"312755",	"312728",	"312727",	"312723",	"312691",	"312686",	"312673",	"312669",	"312668",	"312650",	"312647",	"312634",	"312627",	"312613",	"312609",	"312578",	"312558",	"312551",	"312544",	"312523",	"312521",	"312489",	"312486",	"312472",	"312470",	"312469",	"312464",	"312448",	"312444",	"312441",	"312443",	"312428",	"312426",	"312423",	"312405",	"312357",	"312335",	"312324",	"312311",	"312304",	"312302",	"312287",	"312284",	"312278",	"312271",	"312269",	"312262",	"312235",	"312229",	"312223",	"312219",	"312209",	"312195",	"312187",	"312179",	"312156",	"312143",	"312133",	"312100",	"312088",	"312083",	"312067",	"312054",	"312053",	"312052",	"311999",	"311978",	"311968",	"311960",	"311955",	"311929",	"311924",	"311903",	"311895",	"311886",	"311835",	"311834",	"311831",	"311809",	"311791",	"311781",	"311769",	"311740",	"311670",	"311664",	"311637",	"311634",	"311605",	"311584",	"311576",	"311571",	"311570",	"311545",	"311505",	"311489",	"311444",	"311431",	"311412",	"311351",	"311313",	"311286",	"311275",	"311233",	"311212",	"311206",	"311198",	"311187",	"311168",	"311152",	"311136",	"311096",	"311094",	"311065",	"311056",	"311038",	"311036",	"311027",	"311023",	"310998",	"310978",	"310972",	"310956",	"310954",	"310951",	"310943",	"310925",	"310916",	"310915",	"310913",	"310894",	"310885",	"310882",	"310880",	"310860",	"310855",	"310839",	"310838",	"310835",	"310816",	"310785",	"310761",	"310757",	"310756",	"310751",	"310738",	"310729",	"310726",	"310718",	"310692",	"310691",	"310669",	"310660",	"310658",	"310656",	"310652",	"310633",	"310628",	"310626",	"310600",	"310599",	"310598",	"310596",	"310574",	"310562",	"310559",	"310541",	"310537",	"310531",	"310513",	"310509",	"310508",	"310493",	"310478",	"310476",	"310475",	"310463",	"310446",	"310444",	"310432",	"310431",	"310402",	"310379",	"310357",	"310355",	"310354",	"310339",	"310337",	"310334",	"310308",	"310293",	"310265",	"310247",	"310245",	"310235",	"310202",	"310164",	"310152",	"310151",	"310145",	"310120",	"310108",	"310085",	"310068",	"310058",	"310051",	"310044",	"310040",	"310036",	"310034",	"310018",	"310002",	"310001",	"309962",	"309953",	"309950",	"309946",	"309934",	"309920",	"309914",	"309911",	"309907",	"309900",	"309897",	"309895",	"309893",	"309891",	"309873",	"309856",	"309830",	"309817",	"309814",	"309813",	"309802",	"309789",	"309771",	"309769",	"309763",	"309739",	"309715",	"309714",	"309707",	"309702",	"309694",	"309680",	"309677",	"309662",	"309660",	"309652",	"309647",	"309643",	"309642",	"309638",	"309632",	"309631",	"309619",	"309618",	"309616",	"309607",	"309603",	"309588",	"309580",	"309575",	"309534",	"309519",	"309518",	"309501",	"309499",	"309495",	"309494",	"309485",	"309482",	"309463",	"309461",	"309459",	"309447",	"309426",	"309411",	"309363",	"309354",	"309339",	"309336",	"309312",	"309311",	"309295",	"309294",	"309289",	"309280",	"309268",	"309262",	"309236",	"309228",	"309211",	"309202",	"309201",	"309196",	"309189",	"309186",	"309184",	"309161",	"309158",	"309156",	"309134",	"309122",	"309110",	"309092",	"309066",	"309057",	"309053",	"309015",	"308994",	"308969",	"308954",	"308906",	"308891",	"308881",	"308871",	"308835",	"308796",	"308784",	"308780",	"308776",	"308714",	"308693",	"308685",	"308680",	"308672",	"308600",	"308577",	"308567",	"308563",	"308538",	"308534",	"308530",	"308526",	"308518",	"308516",	"308513",	"308511",	"308510",	"308506",	"308500",	"308498",	"308494",	"308426",	"308424",	"308421",	"308420",	"308419",	"308390",	"308388",	"308384",	"308367",	"308363",	"308345",	"308342",	"308299",	"308288",	"308281",	"308275",	"308268",	"308254",	"308246",	"308244",	"308226",	"308206",	"308201",	"308199",	"308193",	"308192",	"308184",	"308182",	"308174",	"308169",	"308162",	"308157",	"308154",	"308143",	"308141",	"308139",	"308136",	"308134",	"308119",	"308111",	"308110",	"308109",	"308108",	"308106",	"308100",	"308094",	"308091",	"308088",	"308087",	"308081",	"308067",	"308052",	"308050",	"308049",	"308035",	"308020",	"308007",	"307998",	"307985",	"307972",	"307970",	"307962",	"307957",	"307951",	"307947",	"307934",	"307933",	"307925",	"307909",	"307895",	"307885",	"307880",	"307868",	"307864",	"307863",	"307833",	"307814",	"307807",	"307803",	"307798",	"307763",	"307792",	"307788",	"307783",	"307750",	"307746",	"307740",	"307731",	"307727",	"307717",	"307714",	"307710",	"307712",	"307704",	"307665",	"307649",	"307647",	"307645",	"307644",	"307631",	"307629",	"307603",	"307596",	"307592",	"307583",	"307578",	"307568",	"307563",	"307549",	"307542",	"307537",	"307521",	"307516",	"307497",	"307475",	"307466",	"307445",	"307419",	"307395",	"307394",	"307392",	"307390",	"307356",	"307309",	"307305",	"307289",	"307286",	"307274",	"307273",	"307270",	"307263",	"307262",	"307257",	"307247",	"307246",	"307243",	"307240",	"307236",	"307233",	"307220",	"307211",	"307203",	"307187",	"307179",	"307171",	"307135",	"307129",	"307108",	"307106",	"307089",	"307088",	"307084",	"307079",	"307071",	"307067",	"307057",	"307049",	"307038",	"307015",	"307014",	"306969",	"306970",	"306966",	"306964",	"306941",	"306927",	"306854",	"306852",	"306836",	"306832",	"306814",	"306794",	"306791",	"306779",	"306773",	"306762",	"306750",	"306676",	"306643",	"306633",	"306613",	"306548",	"306545",	"306528",	"306518",	"306472",	"306446",	"306440",	"306419",	"306411",	"306397",	"306352",	"306350",	"306321",	"306310",	"306307",	"306278",	"306273",	"306262",	"306207",	"306188",	"306150",	"306138",	"306107",	"306074",	"306066",	"306034",	"306033",	"306018",	"306016",	"305999",	"305997",	"305989",	"305969",	"305967",	"305947",	"305945",	"305937",	"305933",	"305896",	"305862",	"305860",	"305823",	"305784",	"305768",	"305753",	"305745",	"305727",	"305720",	"305718",	"305701",	"305700",	"305699",	"305696",	"305686",	"305679",	"305670",	"305659",	"305632",	"305625",	"305619",	"305618",	"305597",	"305587",	"305572",	"305562",	"305512",	"305508",	"305490",	"305434",	"305424",	"305392",	"305379",	"305344",	"305322",	"305310",	"305309",	"305278",	"305239",	"305213",	"305202",	"305140",	"305110",	"305097",	"305093",	"305092",	"305061",	"305042",	"305028",	"305027",	"305011",	"304974",	"304943",	"304923",	"304912",	"304885",	"304842",	"304837",	"304790",	"304766",	"304746",	"304733",	"304732",	"304721",	"304663",	"304616",	"304589",	"304583",	"304457",	"304424",	"304372",	"304369",	"304365",	"304308",	"304289",	"304236",	"304211",	"304205",	"304156",	"304138",	"304087",	"304024",	"304017",	"304016",	"303724",	"303677",	"303645",	"303627",	"303548",	"303526",	"303405",	"303395",	"303359",	"303305",	"303117",	"302900",	"302857",	"302835",	"302357",	"302186",	"301878",	"300683",	"300540",	"124881",	"121054",	"118741",	"117451",	"91754",	"87636",	"86444",	"200941",	"84244",	"67879",


]

for idx, partial_url in enumerate(article_partial_urls, start=1):
    full_url = base_url + partial_url
    print(f"Extracting content from: {full_url}")
    try:
        article_text = extract_text_from_url(full_url)
        # Extract article ID from URL for filename
        article_id = partial_url.split('=')[-1]
        file_path = os.path.join(output_dir, f"article_{article_id}.txt")

        with open(file_path, 'w', encoding='utf-8') as file:
            file.write(article_text)

        print(f"Content saved to {file_path}")
        print("\n---\n")
    except Exception as e:
        print(f"Failed to extract content from {full_url}. Error: {e}")
        print("\n---\n")
